<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#3498db">
    <meta name="description" content="Sistema de control de transporte marítimo para rutas Corralejo - Isla de Lobos">
    <title>Control de Transporte Marítimo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" type="image/png" href="./icons/icon-192x192.png">
    <link rel="apple-touch-icon" href="./icons/icon-192x192.png">
    <style>
        /* Todos los estilos CSS anteriores van aquí */
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --dark-color: #34495e;
            --light-color: #ecf0f1;
            --ocean-color: #3498db;
            --sand-color: #f1c40f;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: #333;
            min-height: 100vh;
            padding-bottom: 70px;
            -webkit-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
        }
        
        /* ... (todo el CSS anterior se mantiene igual) ... */
        
    </style>
</head>
<body>
    <div class="offline-indicator" id="offline-indicator">
        <i class="fas fa-wifi"></i> Estás trabajando sin conexión
    </div>
    <div class="online-indicator" id="online-indicator">
        <i class="fas fa-wifi"></i> Conexión restaurada
    </div>
    
    <button class="pwa-install-btn" id="pwa-install-btn" title="Instalar aplicación">
        <i class="fas fa-download"></i>
    </button>
    
    <div class="island-background"></div>
    <div id="notification" class="notification"></div>
    
    <div class="install-prompt" id="install-prompt">
        <p>¿Instalar la aplicación en tu dispositivo?</p>
        <button id="install-btn" class="btn-success">
            <i class="fas fa-download"></i> Instalar
        </button>
        <button id="cancel-install" class="btn-danger">
            <i class="fas fa-times"></i> Cancelar
        </button>
    </div>
    
    <header>
        <div class="logo"><i class="fas fa-ship"></i></div>
        <h1>Control de Transporte Marítimo <span class="sync-status sync-online" id="sync-status">En Línea</span></h1>
    </header>

    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="registro">
                <i class="fas fa-plus-circle"></i> Nuevo Registro
            </div>
            <div class="tab" data-tab="viajes">
                <i class="fas fa-history"></i> Historial
            </div>
            <div class="tab" data-tab="barcos">
                <i class="fas fa-ship"></i> Barcos
            </div>
            <div class="tab" data-tab="resumen">
                <i class="fas fa-chart-bar"></i> Resumen
            </div>
            <div class="tab" data-tab="backup">
                <i class="fas fa-database"></i> Copia de Seguridad
            </div>
        </div>

        <!-- Contenido de las pestañas -->
        <div class="tab-content active" id="registro">
            <div class="card">
                <h2><i class="fas fa-plus-circle"></i> Registrar Nuevo Viaje</h2>
                <form id="viaje-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fecha">Fecha:</label>
                            <input type="date" id="fecha" required class="mobile-form-input">
                        </div>
                        <div class="form-group">
                            <label for="barco">Barco:</label>
                            <select id="barco" required class="mobile-form-input">
                                <option value="">Seleccionar barco</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="hora-salida">Hora de Salida:</label>
                            <input type="time" id="hora-salida" required class="mobile-form-input">
                        </div>
                        <div class="form-group">
                            <label for="hora-llegada">Hora de Llegada:</label>
                            <input type="time" id="hora-llegada" required class="mobile-form-input">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="agua-potable">Agua Potable (litros):</label>
                            <input type="number" id="agua-potable" min="0" placeholder="Litros de Corralejo a Lobos" class="mobile-form-input">
                        </div>
                        <div class="form-group">
                            <label for="agua-residual">Agua Residual (litros):</label>
                            <input type="number" id="agua-residual" min="0" placeholder="Litros de Lobos a Corralejo" class="mobile-form-input">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="bolsas-basura">Bolsas de Basura:</label>
                            <input type="number" id="bolsas-basura" min="0" placeholder="Número de bolsas" class="mobile-form-input">
                        </div>
                        <div class="form-group">
                            <label>Combustible Calculado:</label>
                            <div class="calculation-display" id="combustible-calculado">0.0 litros</div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="combustible-real">Combustible Real (litros) - Opcional:</label>
                            <input type="number" id="combustible-real" min="0" step="0.1" placeholder="Litros reales consumidos" class="mobile-form-input">
                        </div>
                    </div>
                    <button type="submit"><i class="fas fa-save"></i> Registrar Viaje</button>
                </form>
            </div>
        </div>

        <!-- Las otras pestañas (viajes, barcos, resumen, backup) se mantienen igual -->
        <div class="tab-content" id="viajes">
            <!-- Contenido del historial -->
        </div>

        <div class="tab-content" id="barcos">
            <!-- Contenido de barcos -->
        </div>

        <div class="tab-content" id="resumen">
            <!-- Contenido del resumen -->
        </div>

        <div class="tab-content" id="backup">
            <!-- Contenido de backup -->
        </div>
    </div>

    <div class="footer">
        <p>Control de Transporte Marítimo PWA © 2024 | Desplegado en GitHub Pages</p>
    </div>

    <script>
        // Código JavaScript completo aquí
        // (Todo el código JavaScript anterior se mantiene)
        
        // Inicialización básica para GitHub Pages
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Aplicación PWA cargada en GitHub Pages');
            
            // Establecer fecha actual
            const hoy = new Date().toISOString().split('T')[0];
            const fechaInput = document.getElementById('fecha');
            if (fechaInput) {
                fechaInput.value = hoy;
            }
            
            // Mostrar notificación de bienvenida
            setTimeout(() => {
                showNotification('Aplicación PWA cargada correctamente en GitHub Pages');
            }, 1000);
            
            // Registrar Service Worker
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('SW registrado: ', registration);
                    })
                    .catch(error => {
                        console.log('Error SW: ', error);
                    });
            }
        });

        // Funciones básicas (showNotification, etc.)
        function showNotification(message, isError = false) {
            const notification = document.getElementById('notification');
            if (!notification) return;
            
            notification.textContent = message;
            notification.className = 'notification';
            
            if (isError) {
                notification.classList.add('error');
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // El resto del código JavaScript se mantiene igual
        // ... (todo el código de gestión de la aplicación)
    </script>
</body>
</html>
